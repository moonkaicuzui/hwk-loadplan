# QMS (Quality Management System) 사용자 가이드

**Version**: v18
**Last Updated**: 2026-01-18

## 목차

1. [개요](#1-개요)
2. [시작하기](#2-시작하기)
3. [기능별 사용법](#3-기능별-사용법)
4. [권한 및 역할](#4-권한-및-역할)
5. [FAQ](#5-faq)
6. [문제 해결](#6-문제-해결)

---

## 1. 개요

### 1.1 QMS란?

QMS(Quality Management System)는 Rachgia Factory 생산 현황 대시보드의 품질 관리 작업 모니터링 시스템입니다. 생산 오더의 품질 검수, 수정/재작업, 결과 관리를 통합적으로 수행할 수 있습니다.

### 1.2 주요 기능

| 기능 | 설명 |
|------|------|
| **타겟 등록** | 품질 모니터링 대상 오더 등록 |
| **모니터링 현황** | 등록된 타겟의 생산 진행 상황 조회 |
| **작업 지시** | 검수/수정/재작업 등 작업 할당 |
| **작업 목록** | 할당된 작업 목록 조회 및 관리 |
| **결과 관리** | 작업 결과 기록 및 저장 |

### 1.3 데이터 저장소

- **Google Sheets** 연동 (OAuth 2.0 인증)
- 3개 시트 사용:
  - `QMS_Targets`: 모니터링 타겟 정보
  - `QMS_Tasks`: 작업 지시 내역
  - `QMS_Results`: 작업 결과 기록

---

## 2. 시작하기

### 2.1 QMS 탭 접근

1. Rachgia Dashboard 상단 탭 메뉴에서 **🎯 품질관리** 클릭
2. QMS 콘텐츠 영역이 표시됩니다

### 2.2 Google 계정 연결

QMS 기능을 사용하려면 Google 계정 연결이 필요합니다:

1. **⚙️ 설정** 버튼 클릭
2. 설정 모달에서 필수 정보 입력:
   - **Spreadsheet ID**: Google Sheets 문서 ID
   - **Client ID**: Google Cloud Console에서 생성한 OAuth 클라이언트 ID
3. **저장** 버튼 클릭
4. **Google 계정으로 로그인** 버튼 클릭
5. Google 인증 팝업에서 계정 선택 및 권한 승인

### 2.3 Google Sheets 준비

1. [Google Sheets](https://sheets.google.com)에서 새 스프레드시트 생성
2. 3개 시트 생성:
   - `QMS_Targets`
   - `QMS_Tasks`
   - `QMS_Results`
3. 각 시트의 첫 행에 헤더 추가 (자동 생성됨)

### 2.4 Google Cloud Console 설정

1. [Google Cloud Console](https://console.cloud.google.com) 접속
2. 새 프로젝트 생성
3. **API 및 서비스 > 사용 설정**에서 Google Sheets API 활성화
4. **사용자 인증 정보 > OAuth 2.0 클라이언트 ID** 생성
5. 승인된 자바스크립트 원본에 대시보드 URL 추가
6. 클라이언트 ID 복사하여 QMS 설정에 입력

---

## 3. 기능별 사용법

### 3.1 타겟 등록 (📋)

품질 모니터링 대상 오더를 등록합니다.

#### 오더 선택
1. **타겟등록** 서브탭 클릭
2. 필터를 사용하여 원하는 오더 검색:
   - 월 필터
   - 행선지 필터
   - 모델 필터
   - 검색어 입력
3. 체크박스로 등록할 오더 선택 (복수 선택 가능)
4. 전체 선택 체크박스로 일괄 선택 가능

#### 타겟 등록
1. 오더 선택 후 **선택 항목 등록** 버튼 클릭
2. 등록 확인 다이얼로그에서 **확인** 클릭
3. 등록 완료 토스트 메시지 확인
4. Google Sheets `QMS_Targets` 시트에 데이터 저장됨

### 3.2 모니터링 현황 (📊)

등록된 타겟의 생산 진행 상황을 조회합니다.

#### 타겟 목록 조회
- 등록된 모든 타겟이 테이블 형태로 표시됩니다
- 각 타겟의 정보:
  - PO번호, 아티클, 모델
  - 수량, CRD, SDD
  - 생산 진행률 (프로그레스 바)
  - 상태 (active/completed/cancelled)
  - 우선순위 (high/medium/low)

#### 상태 변경
- **완료**: 타겟의 품질 관리 작업 완료
- **취소**: 타겟 모니터링 취소

#### 타겟 삭제
1. 삭제할 타겟의 **삭제** 버튼 클릭
2. 확인 다이얼로그에서 **확인** 클릭
3. Google Sheets에서도 해당 행 삭제됨

### 3.3 작업 지시 (📝)

타겟에 대한 작업을 생성하고 할당합니다.

#### 작업 생성
1. **작업지시** 서브탭 클릭
2. 타겟 선택 드롭다운에서 대상 타겟 선택
3. 작업 유형 선택:
   - **검수 (Inspection)**: 품질 검사 작업
   - **수정/재작업 (Rework)**: 불량 수정 작업
   - **커스텀 (Custom)**: 사용자 정의 작업
4. 작업 정보 입력:
   - 작업 제목 (필수)
   - 작업 설명
   - 담당자 이메일 (필수)
   - 마감일
   - 우선순위 (high/medium/low)
5. **작업 생성** 버튼 클릭

#### 작업 유형별 폼
- **검수**: 기본 폼
- **수정/재작업**: 불량 사유, 수정 지시사항 추가 필드
- **커스텀**: 자유 형식 입력 가능

### 3.4 작업 목록 (📑)

생성된 모든 작업을 조회하고 관리합니다.

#### 필터링
- **상태별**: pending/in_progress/completed/cancelled
- **담당자별**: 담당자 이메일로 필터
- **타겟별**: 특정 타겟의 작업만 조회

#### 작업 상태 관리
- **pending** → **in_progress**: 작업 시작
- **in_progress** → **completed**: 작업 완료
- **cancelled**: 작업 취소

상태 변경 시 Google Sheets에 자동 반영됩니다.

#### 작업 상세 보기
- 작업 행 클릭 시 상세 정보 표시
- 연관 타겟 정보, 작업 히스토리 확인 가능

### 3.5 결과 관리 (✅)

완료된 작업의 결과를 기록합니다.

#### 결과 입력
1. **결과관리** 서브탭 클릭
2. 결과 입력할 작업 선택
3. 결과 정보 입력:
   - **결과 상태**: pass/fail/partial
   - **합격 수량**: 검수 통과 수량
   - **불합격 수량**: 불량 수량
   - **불합격 사유**: 다중 선택 가능
   - **발견 사항**: 검수 중 발견된 내용
   - **조치 내용**: 수행한 조치 사항
   - **사진 URL**: 증빙 사진 (선택)
4. **결과 저장** 버튼 클릭

#### 불합격 사유 옵션
- 치수 불량
- 봉제 불량
- 외관 불량
- 자재 불량
- 기타

#### 결과 조회
- 저장된 결과 목록 확인
- 타겟별 필터링 가능
- 결과 상세 보기 지원

---

## 4. 권한 및 역할

### 4.1 역할 정의

| 역할 | 설명 | 기본 권한 |
|------|------|----------|
| **Admin** | 시스템 관리자 | 모든 기능 + 사용자 관리 |
| **Manager** | 관리자 | 타겟 등록, 작업 지시, 결과 조회 |
| **Inspector** | 검수원 | 작업 조회, 결과 입력 |
| **Viewer** | 열람자 | 조회만 가능 |

### 4.2 역할별 접근 권한

| 기능 | Admin | Manager | Inspector | Viewer |
|------|-------|---------|-----------|--------|
| 타겟 등록 | ✅ | ✅ | ❌ | ❌ |
| 타겟 삭제 | ✅ | ✅ | ❌ | ❌ |
| 모니터링 조회 | ✅ | ✅ | ✅ | ✅ |
| 작업 생성 | ✅ | ✅ | ❌ | ❌ |
| 작업 상태 변경 | ✅ | ✅ | ✅ | ❌ |
| 결과 입력 | ✅ | ✅ | ✅ | ❌ |
| 결과 조회 | ✅ | ✅ | ✅ | ✅ |
| 설정 변경 | ✅ | ❌ | ❌ | ❌ |

### 4.3 역할 설정

현재 로그인한 사용자의 역할은 설정 모달에서 확인할 수 있습니다.
역할 변경은 Admin 권한 사용자만 가능합니다.

---

## 5. FAQ

### Q1. Google Sheets와 연결이 안 됩니다.

**A:** 다음 사항을 확인해주세요:
1. Spreadsheet ID가 올바른지 확인
2. Client ID가 올바른지 확인
3. Google Sheets API가 활성화되어 있는지 확인
4. OAuth 동의 화면이 설정되어 있는지 확인
5. 승인된 자바스크립트 원본에 현재 URL이 등록되어 있는지 확인

### Q2. 동기화 버튼을 눌러도 데이터가 업데이트되지 않습니다.

**A:** 다음 사항을 확인해주세요:
1. 로그인 상태 확인 (로그인 필요)
2. 네트워크 연결 상태 확인
3. Google Sheets 접근 권한 확인
4. 브라우저 콘솔에서 오류 메시지 확인

### Q3. 자동 동기화 간격은 어떻게 변경하나요?

**A:** 설정 모달에서 변경 가능합니다:
1. ⚙️ 설정 버튼 클릭
2. 자동 동기화 토글 ON
3. 동기화 간격 선택 (15초/30초/1분/2분/5분)
4. 저장 버튼 클릭

### Q4. 타겟 등록 시 오더가 보이지 않습니다.

**A:** 다음 사항을 확인해주세요:
1. 대시보드에 데이터가 로드되어 있는지 확인
2. 필터 조건이 올바른지 확인
3. 이미 등록된 타겟은 목록에서 제외됩니다

### Q5. 작업 상태를 잘못 변경했습니다. 되돌릴 수 있나요?

**A:** 작업 상태 변경은 되돌릴 수 있습니다:
- completed → in_progress (재작업 필요 시)
- cancelled → pending (취소 철회)

단, 변경 이력은 auditTrail에 기록됩니다.

---

## 6. 문제 해결

### 6.1 일반적인 문제

#### 로딩이 오래 걸림
- 네트워크 상태 확인
- 브라우저 캐시 삭제
- 페이지 새로고침

#### 화면이 깨짐
- 브라우저 최신 버전 사용
- 다크모드/라이트모드 전환 시도
- 화면 크기 조절

### 6.2 인증 관련 문제

#### "로그인 필요" 메시지
- Google 계정 로그인 버튼 클릭
- 팝업 차단 해제 확인
- 쿠키 허용 확인

#### "인증 만료" 메시지
- 로그아웃 후 다시 로그인
- 토큰 갱신 대기 (자동 처리)

### 6.3 데이터 관련 문제

#### 데이터 충돌
여러 사용자가 동시에 같은 데이터를 수정하면 충돌이 발생할 수 있습니다:
- 마지막 수정 시간 기준으로 충돌 감지
- 충돌 시 알림 표시
- 수동으로 최신 데이터 선택

#### 데이터 누락
- 동기화 버튼 클릭하여 최신 데이터 로드
- Google Sheets에서 직접 데이터 확인
- 네트워크 오류 시 재시도

### 6.4 지원 요청

문제가 해결되지 않을 경우:
1. 브라우저 콘솔 (F12 > Console) 오류 메시지 캡처
2. 발생 상황 상세 기록
3. 담당자에게 문의

---

## 부록

### A. 키보드 단축키

| 단축키 | 기능 |
|--------|------|
| `Alt + 1~8` | 탭 전환 |
| `Escape` | 모달 닫기 |
| `Enter` | 폼 제출 |
| `Tab` | 다음 입력 필드로 이동 |

### B. 상태 배지 색상

| 상태 | 색상 | 의미 |
|------|------|------|
| pending | 노랑 | 대기 중 |
| in_progress | 파랑 | 진행 중 |
| completed | 초록 | 완료 |
| cancelled | 빨강 | 취소 |

### C. 우선순위 표시

| 우선순위 | 색상 | 의미 |
|----------|------|------|
| high | 빨강 | 긴급 |
| medium | 노랑 | 보통 |
| low | 초록 | 낮음 |

---

**문서 끝**
