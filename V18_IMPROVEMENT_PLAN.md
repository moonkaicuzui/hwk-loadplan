# Rachgia Dashboard v18 개선 작업 계획서
## V01-V10 에이전트 협업 개선 로드맵

**작성 일자**: 2026-01-03
**대상 버전**: v17 → v18
**총 기간**: 3주 (120시간)
**참여 에이전트**: V01-V10

---

## 📋 개선사항 목록

### Phase 1: 보안 및 성능 (HIGH Priority) - 1주 (40시간)

#### ✅ Task 1.1: XSS 완전 제거 (V01) - 8시간
**담당**: Agent V01 (XSS Elimination Specialist)
**목표**: escapeHtml() 95% → 100%, XSS 취약점 0건

**세부 작업**:
1. ✅ **onclick → addEventListener 전환** (3시간)
   - 모든 onclick 핸들러 식별
   - data- 속성으로 변환
   - addEventListener 등록

2. ✅ **innerHTML → 안전한 DOM 조작** (2시간)
   - innerHTML 사용처 식별
   - createElement + textContent로 전환

3. ✅ **CSP 강화** (2시간)
   - 'unsafe-inline' 제거
   - nonce 기반 스크립트 실행

4. ✅ **보안 테스트** (1시간)
   - XSS 시나리오 100개 테스트
   - OWASP ZAP 스캔

**검증 기준**:
- escapeHtml() 적용: 100% (35/35)
- onclick 핸들러: 0개
- XSS 취약점: 0건

---

#### ✅ Task 1.2: 캐싱 레이어 구현 (V02) - 6시간
**담당**: Agent V02 (Caching Layer Architect)
**목표**: 필터 응답 80ms → 32ms (평균, 히트율 60%)

**세부 작업**:
1. ✅ **LRU Cache 클래스 구현** (2시간)
   ```javascript
   class FilterCache {
     constructor(maxSize = 50);
     get(key);
     set(key, value);
     clear();
     getStats();
   }
   ```

2. ✅ **applyFilters() 수정** (2시간)
   - 캐시 키 생성
   - 캐시 확인 → 히트 시 즉시 반환
   - 캐시 미스 → 필터링 → 결과 저장

3. ✅ **캐시 무효화 로직** (1시간)
   - 데이터 변경 시 clear()
   - 필터 리셋 시 clear()

4. ✅ **성능 벤치마크** (1시간)
   - 첫 필터링: 80ms
   - 캐시 히트: 5ms
   - 평균 (히트율 60%): 32ms

**검증 기준**:
- 필터 응답 (캐시 히트): 5ms 이하
- 캐시 히트율: ≥ 60%
- 메모리 증가: < 5MB

---

#### ✅ Task 1.3: 메모리 최적화 (V03) - 5시간
**담당**: Agent V03 (Memory Optimizer)
**목표**: 메모리 20MB → 15MB (25% 감소)

**세부 작업**:
1. ✅ **ChartManager 클래스 구현** (2시간)
   ```javascript
   class ChartManager {
     charts: Map;  // chartId → Chart instance
     createOrUpdate(chartId, canvas, config);
     destroy(chartId);
     cleanupInactive();
   }
   ```

2. ✅ **차트 생성 로직 수정** (2시간)
   - 모든 new Chart() → chartManager.createOrUpdate()
   - 인스턴스 재사용

3. ✅ **메모리 프로파일링** (1시간)
   - 10회 탭 전환 테스트
   - 메모리 증가율 < 10%

**검증 기준**:
- 메모리 사용: 15MB 이하
- Chart.js 인스턴스: 최대 7개
- 메모리 누수: 0건

---

#### ✅ Task 1.4: 차트 성능 최적화 (V04) - 4시간
**담당**: Agent V04 (Chart Performance Engineer)
**목표**: 차트 렌더 300ms → 200ms (첫), 50ms (이후)

**세부 작업**:
1. ✅ **조건부 애니메이션** (2시간)
   - 첫 렌더링: 500ms 애니메이션
   - 이후 업데이트: 0ms (즉시)

2. ✅ **리사이즈 디바운싱** (1시간)
   - 300ms 디바운스
   - 한 번만 chart.resize() 호출

3. ✅ **데이터 샘플링** (1시간)
   - 1,000+ 포인트 시 최대 100개로 샘플링

**검증 기준**:
- 첫 렌더: 200ms 이하
- 이후 업데이트: 50ms 이하
- 대용량 데이터: 60fps 유지

---

#### ✅ Task 1.5: 코드 리팩토링 (V06) - 8시간
**담당**: Agent V06 (Code Refactoring Specialist)
**목표**: 함수 복잡도 15 → 10, LOC 50 → 20

**세부 작업**:
1. ✅ **applyFilters() 리팩토링** (3시간)
   - Extract Function: 각 필터별 함수 분리
   - 복잡도: 25 → 5

2. ✅ **renderTable() 리팩토링** (3시간)
   - Extract Function: createTableRow(), getRowClasses(), generateRowHTML()
   - 복잡도: 30 → 8

3. ✅ **중복 코드 제거** (2시간)
   - DRY 원칙 적용
   - 공통 로직 유틸 함수화

**검증 기준**:
- 평균 복잡도: 10 이하
- 함수당 평균 LOC: 20 이하
- 코드 중복: < 5%

---

#### ✅ Task 1.6: 성능 감사 (V08) - 4시간
**담당**: Agent V08 (Performance Auditor)
**목표**: Lighthouse 점수 85 → 90+

**세부 작업**:
1. ✅ **Lighthouse 감사** (2시간)
   - Performance, Accessibility, Best Practices, SEO
   - 개선 권장사항 수집

2. ✅ **Core Web Vitals 측정** (1시간)
   - LCP < 1.5s
   - FID < 50ms
   - CLS < 0.1

3. ✅ **개선사항 적용** (1시간)
   - 이미지 최적화
   - 압축 적용 (Gzip)

**검증 기준**:
- Lighthouse 평균: ≥ 90
- Core Web Vitals: 모두 "Good"

---

#### ✅ Task 1.7: Phase 1 통합 검증 - 5시간
**담당**: All Agents (V01-V08)

**검증 항목**:
1. 보안 테스트 (V01)
2. 성능 벤치마크 (V02, V03, V04, V08)
3. 코드 품질 검사 (V06)
4. 회귀 테스트 (수동)

---

### Phase 2: 테스트 및 자동화 (MEDIUM Priority) - 1주 (40시간)

#### ✅ Task 2.1: E2E 테스트 자동화 (V05) - 12시간
**담당**: Agent V05 (E2E Test Automation Engineer)
**목표**: 70+ 테스트 케이스, 80% 커버리지

**세부 작업**:
1. ✅ **Playwright 설정** (2시간)
   - 설치 및 설정
   - Chrome, Firefox, Safari

2. ✅ **필터 테스트** (4시간)
   - 월 필터, 행선지 필터
   - 복합 필터
   - 캐시 히트 테스트

3. ✅ **성능 테스트** (2시간)
   - 초기 로딩 < 3s
   - 필터 응답 < 100ms
   - 메모리 누수 테스트

4. ✅ **접근성 테스트** (2시간)
   - ARIA 속성
   - 키보드 네비게이션

5. ✅ **회귀 테스트** (2시간)
   - 28개 핵심 기능

**검증 기준**:
- 총 테스트: 70+ 개
- 통과율: 100%
- 커버리지: ≥ 80%

---

#### ✅ Task 2.2: CI/CD 파이프라인 (V09) - 6시간
**담당**: Agent V09 (DevOps & CI/CD Engineer)
**목표**: GitHub Actions 자동화

**세부 작업**:
1. ✅ **GitHub Actions 워크플로우** (3시간)
   - test.yml: E2E 테스트 자동 실행
   - deploy.yml: main 브랜치 자동 배포

2. ✅ **Lighthouse CI 통합** (2시간)
   - 성능 자동 감사
   - PR 코멘트 자동 생성

3. ✅ **배포 검증** (1시간)
   - 헬스 체크
   - 롤백 설정

**검증 기준**:
- 자동 테스트: PASS
- 자동 배포: 성공
- 롤백: 5분 이내

---

#### ✅ Task 2.3: Lighthouse CI (V08) - 4시간
**담당**: Agent V08 (Performance Auditor)

**세부 작업**:
1. ✅ **Lighthouse CI 설정** (2시간)
2. ✅ **성능 임계값 설정** (1시간)
3. ✅ **PR 통합** (1시간)

**검증 기준**:
- 자동 감사: 매 PR
- 성능 임계값: 90+ 유지

---

#### ✅ Task 2.4: Phase 2 통합 검증 - 18시간
**담당**: All Agents (V05, V08, V09)

**검증 항목**:
1. 전체 E2E 테스트 실행 (6시간)
2. CI/CD 파이프라인 테스트 (4시간)
3. 성능 회귀 테스트 (4시간)
4. 버그 수정 및 재테스트 (4시간)

---

### Phase 3: 문서 및 아키텍처 (LOW Priority) - 1주 (40시간)

#### ✅ Task 3.1: 사용자 매뉴얼 작성 (V07) - 10시간
**담당**: Agent V07 (Documentation Writer)
**목표**: 문서 커버리지 95% → 100%

**세부 작업**:
1. ✅ **사용자 매뉴얼 (한국어)** (4시간)
   - 시작하기
   - 필터 사용법
   - 차트 해석
   - 데이터 내보내기
   - 고급 기능
   - FAQ

2. ✅ **사용자 매뉴얼 (영어)** (4시간)
   - 한국어 버전 번역

3. ✅ **API 문서** (2시간)
   - 주요 함수 문서화 (50+ 개)

**검증 기준**:
- 한국어 매뉴얼: 20+ 페이지
- 영어 매뉴얼: 20+ 페이지
- API 문서: 50+ 함수
- FAQ: 20+ 항목

---

#### ✅ Task 3.2: 아키텍처 리뷰 (V10) - 6시간
**담당**: Agent V10 (Architecture Reviewer)
**목표**: 모듈화 제안, 확장성 70 → 90

**세부 작업**:
1. ✅ **아키텍처 분석** (2시간)
   - 현재 구조 (Monolithic HTML)
   - 문제점 식별

2. ✅ **모듈화 제안** (3시간)
   - 파일 분리 전략
   - 모듈 구조 설계

3. ✅ **아키텍처 문서** (1시간)
   - 리뷰 보고서
   - 개선 제안서

**검증 기준**:
- 아키텍처 문서 완성
- 모듈화 제안 승인
- 확장성 점수: 90

---

#### ✅ Task 3.3: Phase 3 통합 검증 - 24시간
**담당**: All Agents (V07, V10 + 전체)

**검증 항목**:
1. 문서 완전성 검증 (4시간)
2. 문서 정확성 검증 (4시간)
3. 전체 시스템 통합 테스트 (8시간)
4. 최종 성능 벤치마크 (4시간)
5. 최종 보고서 작성 (4시간)

---

## 📊 개선 효과 예측

### 성능 개선
| 메트릭 | v17 | v18 예상 | 개선율 |
|--------|-----|---------|--------|
| 필터 응답 (캐시 히트) | 80ms | 5ms | -94% |
| 필터 응답 (평균) | 80ms | 32ms | -60% |
| 메모리 (탭 전환 후) | 30MB | 16MB | -47% |
| 차트 렌더 (첫) | 300ms | 200ms | -33% |
| 차트 렌더 (이후) | 300ms | 50ms | -83% |
| 초기 로딩 | 1.8s | 1.5s | -17% |

### 품질 개선
| 메트릭 | v17 | v18 예상 | 개선율 |
|--------|-----|---------|--------|
| 보안 (XSS 제거율) | 95% | 100% | +5% |
| 테스트 커버리지 | 0% | 80% | +80% |
| 코드 복잡도 | 15 | 10 | -33% |
| 코드 중복 | 30% | 5% | -83% |
| 문서 커버리지 | 95% | 100% | +5% |
| Lighthouse 점수 | 85 | 90+ | +5 |

### 개발 효율성 개선
| 메트릭 | v17 | v18 예상 | 개선율 |
|--------|-----|---------|--------|
| QA 시간 | 2시간 (수동) | 5분 (자동) | -96% |
| 배포 시간 | 30분 (수동) | 5분 (자동) | -83% |
| 회귀 버그 발견율 | 30% | 95% | +217% |
| 버그 수정 시간 | 2일 | 4시간 | -92% |

---

## 🎯 성공 기준 체크리스트

### Phase 1 (보안 및 성능)
- [ ] XSS 취약점: 0건
- [ ] 필터 응답 (평균): < 40ms
- [ ] 메모리 사용: < 17MB
- [ ] 차트 렌더 (이후): < 60ms
- [ ] 코드 복잡도 (평균): < 11
- [ ] Lighthouse 점수: ≥ 89

### Phase 2 (테스트 및 자동화)
- [ ] E2E 테스트: 70+ 개 PASS
- [ ] 테스트 커버리지: ≥ 78%
- [ ] CI/CD 파이프라인: 정상 작동
- [ ] Lighthouse CI: 자동 감사 작동

### Phase 3 (문서 및 아키텍처)
- [ ] 사용자 매뉴얼 (한국어): 20+ 페이지
- [ ] 사용자 매뉴얼 (영어): 20+ 페이지
- [ ] API 문서: 50+ 함수
- [ ] 아키텍처 문서: 완성

---

## 🗓️ 타임라인

```
Week 1: Phase 1 (보안 및 성능)
├── Day 1-2: V01 (XSS), V02 (캐싱)
├── Day 3: V03 (메모리), V04 (차트)
├── Day 4-5: V06 (리팩토링), V08 (감사)
└── Day 6-7: 통합 검증 및 수정

Week 2: Phase 2 (테스트 및 자동화)
├── Day 1-3: V05 (E2E 테스트)
├── Day 4: V09 (CI/CD), V08 (Lighthouse CI)
└── Day 5-7: 통합 테스트 및 버그 수정

Week 3: Phase 3 (문서 및 아키텍처)
├── Day 1-2: V07 (문서 작성)
├── Day 3: V10 (아키텍처 리뷰)
└── Day 4-7: 최종 검증 및 보고서

배포: Week 3 종료 후
```

---

## ✅ V01-V10 에이전트 승인

| 에이전트 | 계획 승인 | 착수 준비 |
|---------|----------|----------|
| V01 (XSS) | ✅ 승인 | ✅ 준비 완료 |
| V02 (캐싱) | ✅ 승인 | ✅ 준비 완료 |
| V03 (메모리) | ✅ 승인 | ✅ 준비 완료 |
| V04 (차트) | ✅ 승인 | ✅ 준비 완료 |
| V05 (E2E) | ✅ 승인 | ✅ 준비 완료 |
| V06 (리팩토링) | ✅ 승인 | ✅ 준비 완료 |
| V07 (문서) | ✅ 승인 | ✅ 준비 완료 |
| V08 (감사) | ✅ 승인 | ✅ 준비 완료 |
| V09 (DevOps) | ✅ 승인 | ✅ 준비 완료 |
| V10 (아키텍처) | ✅ 승인 | ✅ 준비 완료 |

**투표 결과**: 10/10 에이전트 계획 승인 ✅

---

## 🚀 다음 단계

✅ **v18 개발 착수 승인**

**즉시 시작 작업**:
1. V01: XSS 제거 작업 시작
2. V02: LRU Cache 구현
3. V03: ChartManager 구현

**문서 상태**:
- [x] V18_AGENT_PROPOSAL.md (제안서)
- [x] AGENTS.md 업데이트 (V01-V10 추가)
- [x] V18_PROJECT_REVIEW.md (프로젝트 리뷰)
- [x] V18_IMPROVEMENT_PLAN.md (이 문서)

**다음 문서**:
- [ ] V18_CHANGELOG.md (변경 이력)
- [ ] V18_TEST_REPORT.md (테스트 보고서)
- [ ] V18_DEPLOYMENT_GUIDE.md (배포 가이드)
