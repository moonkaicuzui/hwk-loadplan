# 오더 현황 분석 대시보드 - 통합 검증 리포트

**검증일**: 2025-12-22
**대시보드 버전**: v5.1
**검증 기준**: 로드플랜 데이터 구조 Ground Truth

---

## Executive Summary

| 항목 | 결과 |
|------|------|
| **총 발견 이슈** | 12건 (Critical: 3, Major: 5, Minor: 4) |
| **로드플랜 데이터 반영률** | 약 40% (핵심 비즈니스 로직 미반영) |
| **즉시 수정 필요** | BAL 컬럼 해석 로직, 지연 판단 로직, 자재 관리 미구현 |

---

# Agent 1: 생산 계획 관리자 (Production Planning Manager) 검증 리포트

## 1. 검증 항목별 결과

### 1.1 SDD vs CRD 로직 구현
**결과**: ❌ FAIL

**Ground Truth 정의:**
```
지연 = SDD > CRD (공장 목표가 고객 요청보다 늦음)
정상 = SDD ≤ CRD
```

**현재 대시보드 로직:**
```javascript
function isDelayed(d) {
    const dateVal = getDateValue(d); // SDD 또는 CRD 값
    if (whInCompleted >= qty) return false;
    return targetDate < new Date(); // SDD < 오늘 → 지연
}
```

**문제점:**
- 현재: `SDD < 오늘` AND `창고입고 미완료` → 지연
- 정확: `SDD > CRD` → 지연 (날짜 비교 대상이 잘못됨)
- Code 04 예외 처리 없음

### 1.2 BAL 컬럼 해석 로직
**결과**: ❌ FAIL (CRITICAL)

**Ground Truth:**
> BAL 컬럼 = 잔량이 0이면 완료 날짜 표기, 0이 아니면 미완료 수량 표기
- 날짜 = 전량 완료일
- 수량 = 미완료 잔량

**현재 대시보드:**
- 날짜 → `completed=0, pending=qty, status=pending` ❌
- 수량 → `completed=수량값, pending=0, status=completed` ❌

**정확한 해석:**
- 날짜 → `completed=qty, pending=0, status=completed` ✅
- 수량 → `completed=qty-수량값, pending=수량값, status=partial/pending` ✅

### 1.3 생산 프로세스 단계별 진행률
**결과**: ⚠️ WARNING

- 공정 순서는 올바르게 구현됨: S.Cut → Pre-Sew → Sew Input → Sew Bal → S/Fit → Ass → W.H IN → W.H OUT
- 그러나 BAL 해석 오류로 인해 모든 진행률 계산이 잘못됨

### 1.4 병목 공정 식별
**결과**: ⚠️ WARNING

- 병목 공정 식별 로직 존재
- BAL 해석 오류로 인해 잘못된 병목 표시

### 1.5 일정 지연 조기 경보
**결과**: ❌ FAIL

- 현재 경고: `SDD까지 3일 이내` AND `창고입고 미완료`
- 문제: SDD > CRD 케이스에 대한 경보 없음
- MRP.Qty ≠ Q.ty 케이스 미고려

## 2. 발견된 이슈

### Critical
1. **BAL 컬럼 해석 로직 완전 반대**
   - 영향도: 모든 공정 진행률, 완료율, 지연/경고 판단 오류
   - 재현: 모든 오더에서 재현됨

2. **지연 판단 기준 오류**
   - 현재: SDD < 오늘
   - 정확: SDD > CRD
   - 영향도: 지연 오더 리스트 완전 오류

### Major
1. **Code 04 예외 처리 미구현**
   - 지연 승인 코드가 있는 오더는 지연 아님으로 처리해야 함

2. **MRP.Qty vs Q.ty 차이 미고려**
   - 자재 출고 승인 수량과 주문 수량 차이 존재 가능

## 3. 개선 제안

### Critical (즉시 수정)
1. BAL 컬럼 파싱 로직 수정
```javascript
// 수정된 로직
if (isDateFormat(balValue)) {
    // 날짜 = 전량 완료
    return { completed: qty, pending: 0, status: 'completed', completionDate: balValue };
} else if (isNumeric(balValue)) {
    const remaining = parseFloat(balValue);
    const completed = qty - remaining;
    return {
        completed: completed,
        pending: remaining,
        status: remaining === 0 ? 'completed' : remaining === qty ? 'pending' : 'partial'
    };
}
```

2. 지연 판단 로직 수정
```javascript
function isDelayed(order) {
    // Code 04 승인 확인
    if (order.code04) return false;

    // SDD > CRD면 지연
    const sddDate = parseDate(order.sddValue);
    const crdDate = parseDate(order.crd);
    return sddDate > crdDate;
}
```

## 4. 질문 리스트 답변

**Q: 현재 대시보드에서 "지연 오더"를 어떻게 정의하고 있는가?**
A: `SDD < 오늘` AND `창고입고 미완료`로 정의 → ❌ 잘못됨. 정확한 정의는 `SDD > CRD`

**Q: MRP.Qty ≠ Q.ty 케이스를 고려하는가?**
A: ❌ 미고려. MRP 관련 데이터가 대시보드에 없음

**Q: 외주 공정(OUT/IN)의 지연이 전체 일정에 미치는 영향을 시각화하는가?**
A: ❌ 외주 공정 데이터가 대시보드에 없음

---

# Agent 2: 품질 관리자 (Quality Manager) 검증 리포트

## 1. 검증 항목별 결과

### 2.1 Inspection(AQL 검사) 일정 추적
**결과**: ❌ FAIL

- Inspection 컬럼 데이터가 대시보드에 없음
- AQL 검사 상태 시각화 없음

### 2.2 W.H return Fac (불량 리턴) 데이터 활용
**결과**: ❌ FAIL

- W.H return Fac 데이터가 대시보드에 없음
- 불량 리턴 추적 불가

### 2.3 Sew prod.scan vs Q.ty 차이 분석
**결과**: ❌ FAIL

- Sew prod.scan (실제 재봉 완료 수량) 데이터 없음
- Sew Bal만 사용 중

### 2.4 Outsole Vendor별 품질 이슈 추적
**결과**: ✅ PASS (부분)

- 아웃솔 벤더별 필터/차트 존재
- 그러나 품질 이슈(불량률, 리턴률) 데이터 없음

### 2.5 Ass Bal 장기 체류 오더 모니터링
**결과**: ❌ FAIL

- 조립 공정 장기 체류 오더 필터 없음

## 2. 발견된 이슈

### Major
1. **품질 관련 핵심 데이터 누락**
   - Inspection, W.H return Fac, Sew prod.scan 미포함

2. **불량/리턴 추적 불가**
   - 품질 관리 업무 지원 불가

### Minor
1. **벤더별 품질 성과 비교 불가**
   - 벤더 데이터는 있으나 품질 지표 없음

## 3. 질문 리스트 답변

**Q: 검사(Inspection) 미완료 상태를 어떻게 표시하는가?**
A: ❌ 표시 안됨. Inspection 데이터 미포함

**Q: 리턴(W.H return Fac) 수량이 많은 오더를 필터링할 수 있는가?**
A: ❌ 불가. 해당 데이터 미포함

**Q: 외주업체별 품질 성과를 비교할 수 있는가?**
A: ❌ 불가. 품질 지표 데이터 없음

---

# Agent 3: 자재 관리자 (Material Manager) 검증 리포트

## 1. 검증 항목별 결과

### 3.1 MRP Date와 실제 생산 시작 시점 정합성
**결과**: ❌ FAIL

- MRP Date, MRP.Qty 데이터가 대시보드에 없음

### 3.2 OSC MATERIAL vs MAIN MATERIAL 출고 순서
**결과**: ❌ FAIL

- 자재 출고 데이터 없음
- OSC/MAIN 구분 없음

### 3.3 LAMTION 공정 필요 여부
**결과**: ❌ FAIL

- LAMTION 데이터 없음
- "NO HAPPO" 처리 없음

### 3.4 자재 부족으로 인한 생산 지연 추적
**결과**: ❌ FAIL

- 자재 관련 데이터 전무

### 3.5 외주 재단 자재 (OUT/IN) 회전율
**결과**: ❌ FAIL

- 외주 재단 OUT/IN 데이터 없음
- OSC Vendor (외주업체) 정보 없음

## 2. 발견된 이슈

### Critical
1. **자재 관리 데이터 전체 누락**
   - MRP, OSC/MAIN MATERIAL, LAMTION, 외주 재단 등 전무
   - 자재 관리자 업무 지원 불가

## 3. 질문 리스트 답변

**Q: MRP 승인 후 실제 자재 출고까지의 리드타임을 측정하는가?**
A: ❌ 불가. MRP 데이터 없음

**Q: OSC MATERIAL이 MAIN MATERIAL보다 늦게 출고된 이상 케이스를 감지하는가?**
A: ❌ 불가. 해당 데이터 없음

**Q: 라미네이션 공정 지연을 경고하는가?**
A: ❌ 불가. LAMTION 데이터 없음

---

# Agent 4: 데이터 엔지니어 (Data Engineer) 검증 리포트

## 1. 검증 항목별 결과

### 4.1 BAL 컬럼 파싱 로직 정확성
**결과**: ❌ FAIL (CRITICAL)

**날짜 형식 인식:**
- MM/DD (예: "11/19") - 처리됨
- YYYY.MM.DD (예: "2025.12.30") - 처리됨
- 그러나 **해석 방향이 반대**

**수량 vs 날짜 판별:**
```javascript
// 현재 (잘못된 로직)
if (값이_날짜형식) → pending 상태
if (값이_숫자) → completed 상태

// 정확한 로직 (Ground Truth)
if (값이_날짜형식) → completed 상태 (전량 완료일)
if (값이_숫자) → pending 상태 (미완료 잔량)
```

**특수 문자열 처리:**
- "RACH GIA INHOUSE" → 미처리 (외주 없이 사내 처리 의미)
- "NO HAPPO" → 미처리 (라미네이션 공정 불필요 의미)
- "OK 10/7" → 미처리 (자재 출고 승인 형식)

### 4.2 날짜 계산 로직
**결과**: ❌ FAIL

- SDD vs CRD 비교가 아닌 SDD vs 오늘 비교 사용
- D-day 계산은 구현됨

### 4.3 Null/결측치 처리
**결과**: ⚠️ WARNING

- `"00:00:00"` → 빈 값으로 처리 ✅
- `#N/A` → 미확인
- 빈 셀 → optional chaining으로 처리 ✅

### 4.4 데이터 타입 일관성
**결과**: ⚠️ WARNING

- 수량 컬럼에 "OK 10/7" 같은 문자열 혼입 가능
- 현재 대시보드에서 자재 관련 컬럼 미사용으로 이슈 없음

### 4.5 성능 최적화
**결과**: ✅ PASS

- 4,000건 데이터 로딩 정상
- 필터/정렬 반응 속도 양호

## 2. 발견된 이슈

### Critical
1. **BAL 컬럼 해석 로직 완전 반대**
   - 모든 공정 완료율 데이터 오류 발생

### Major
1. **특수 문자열 처리 미구현**
   - "INHOUSE", "NO HAPPO", "OK MM/DD" 형식 미처리

2. **날짜 형식 다양성 미대응**
   - 일부 날짜가 시간 형식으로 저장 (예: 00:00:00)

## 3. 개선 제안

### BAL 컬럼 파싱 함수 수정
```javascript
function parseBalColumn(value, quantity) {
    // 특수 문자열 처리
    if (!value || value === '00:00:00' || value === '#N/A') {
        return { completed: 0, pending: quantity, status: 'pending' };
    }

    // INHOUSE = 외주 없이 사내 처리 (해당 공정 스킵 가능)
    if (typeof value === 'string' && value.includes('INHOUSE')) {
        return { completed: quantity, pending: 0, status: 'completed', note: 'INHOUSE' };
    }

    // NO HAPPO = 라미네이션 불필요
    if (value === 'NO HAPPO') {
        return { completed: quantity, pending: 0, status: 'not_required', note: 'NO HAPPO' };
    }

    // 날짜 형식 = 전량 완료 (Ground Truth)
    if (isDateFormat(value)) {
        return {
            completed: quantity,
            pending: 0,
            status: 'completed',
            completionDate: parseDate(value)
        };
    }

    // 숫자 형식 = 미완료 잔량 (Ground Truth)
    if (isNumeric(value)) {
        const remaining = parseFloat(value);
        const completed = quantity - remaining;
        return {
            completed: Math.max(0, completed),
            pending: remaining,
            status: remaining === 0 ? 'completed' : remaining >= quantity ? 'pending' : 'partial'
        };
    }

    return { completed: 0, pending: quantity, status: 'unknown' };
}
```

## 4. 질문 리스트 답변

**Q: "10/21"과 "2025.11.28" 같은 다른 날짜 형식을 모두 처리하는가?**
A: ✅ 처리됨. 그러나 해석 방향이 반대로 구현됨

**Q: "RACH GIA INHOUSE" 같은 텍스트가 수량 계산에 영향을 주지 않는가?**
A: 현재 해당 데이터 미사용. 향후 추가 시 처리 필요

**Q: 모든 BAL 컬럼에서 날짜/수량 판별 로직이 일관되게 적용되는가?**
A: ✅ 일관됨. 단, 해석 방향이 반대

---

# Agent 5: UX/대시보드 디자이너 (Dashboard UX Designer) 검증 리포트

## 1. 검증 항목별 결과

### 5.1 정보 우선순위
**결과**: ⚠️ WARNING

**현재 상단 표시:**
- 총 오더, 총 수량, 창고입고 완료, 완료율, 지연/경고

**문제점:**
- SDD > CRD (진정한 지연) 케이스 미표시
- 생산 계획 관리자가 가장 먼저 봐야 할 정보 누락

### 5.2 필터 및 검색 기능
**결과**: ✅ PASS

- Season: 미구현 (데이터에 있으나 필터 없음)
- Model: ✅ 검색 가능
- Dest: ✅ 필터 있음
- Vendor: ✅ 필터 있음
- 월별, 공장별, 완료상태별 필터 ✅

### 5.3 시각화 적절성
**결과**: ✅ PASS

- 진행률: 프로그레스 바 ✅
- 지연 오더: 색상 코딩 (빨강/노랑/초록) ✅
- 히트맵: 모델×국가, 모델×벤더 ✅

### 5.4 공정별 드릴다운
**결과**: ✅ PASS

- 오더 클릭 → 공정별 상세 모달 ✅
- 공정 타임라인 시각화 ✅

### 5.5 액션 가능성
**결과**: ⚠️ WARNING

- 지연 오더 클릭 → 목록 표시 ✅
- 그러나 지연 정의가 잘못되어 실제 지연 오더 파악 불가

## 2. 발견된 이슈

### Major
1. **핵심 지표 오류**
   - BAL 해석 오류로 모든 완료율/진행률 잘못됨
   - 지연 정의 오류로 지연 오더 리스트 잘못됨

### Minor
1. **시즌 필터 미구현**
   - Season 데이터 있으나 필터 없음

2. **모바일 최적화 미확인**
   - 반응형 디자인 테스트 필요

## 3. 질문 리스트 답변

**Q: 생산 계획 관리자가 아침에 가장 먼저 확인해야 할 정보?**
A: SDD > CRD인 지연 오더 리스트 → 현재 미구현

**Q: 품질 관리자가 "검사 대기 중인 오더"를 3초 안에 찾을 수 있는가?**
A: ❌ 불가. Inspection 데이터 없음

**Q: 모바일 환경에서도 핵심 지표를 확인할 수 있는가?**
A: 미테스트. Tailwind 반응형 사용으로 가능할 것으로 예상

---

# Phase 2: 통합 분석 및 우선순위

## 중복 이슈 통합

### 전체 에이전트 공통 지적 (최고 우선순위)
1. **BAL 컬럼 해석 로직 반대** - Agent 1, 4, 5 모두 지적
2. **지연 판단 기준 오류** - Agent 1, 4, 5 지적

### 다수 에이전트 지적
3. **자재 관리 데이터 누락** - Agent 2, 3 지적
4. **품질 관리 데이터 누락** - Agent 2 지적

## 실행 로드맵

### [Immediate] 즉시 수정 (1-2일 내)
- [ ] **Critical Issue 1**: BAL 컬럼 해석 로직 수정 (날짜=완료, 숫자=잔량)
- [ ] **Critical Issue 2**: 지연 판단 로직 수정 (SDD > CRD)
- [ ] **Critical Issue 3**: 경고 로직 수정 (SDD > CRD 케이스 조기 경보)

### [Short-term] 1주일 내
- [ ] Code 04 예외 처리 추가
- [ ] Season 필터 추가
- [ ] 특수 문자열 처리 (INHOUSE, NO HAPPO)

### [Long-term] 향후 개선
- [ ] 자재 관리 섹션 추가 (MRP, OSC/MAIN MATERIAL)
- [ ] 품질 관리 섹션 추가 (Inspection, W.H return Fac)
- [ ] 외주 재단 현황 추가 (OUT/IN BAL)
- [ ] 다국어 지원 (영어, 베트남어)

---

# Phase 3: Critical 이슈 수정 계획

## 수정 1: BAL 컬럼 해석 로직

**현재 (잘못된 로직):**
```
Excel BAL = "12/15" (날짜) → pending 상태
Excel BAL = 840 (숫자) → completed 상태
```

**수정 후 (Ground Truth 기준):**
```
Excel BAL = "12/15" (날짜) → completed 상태 (전량 완료일)
Excel BAL = 840 (숫자) → pending 상태 (미완료 잔량 840)
```

**영향 범위:**
- 모든 공정별 완료율
- 총 완료율
- 병목 공정 식별
- 지연/경고 오더 판단

## 수정 2: 지연 판단 로직

**현재 (잘못된 로직):**
```javascript
isDelayed = SDD < 오늘 && 창고입고 미완료
```

**수정 후 (Ground Truth 기준):**
```javascript
isDelayed = SDD > CRD && !Code04
```

**추가 경고 로직:**
```javascript
// SDD가 CRD보다 늦은 경우 (잠재적 지연)
isPotentialDelay = SDD > CRD

// SDD까지 3일 이내이고 창고입고 미완료 (긴급)
isUrgent = (SDD - 오늘) <= 3 && 창고입고 미완료
```

---

*검증 완료일: 2025-12-22*
*다음 단계: Phase 3 수정 구현*
